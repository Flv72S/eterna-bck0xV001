(()=>{var e={};e.id=26,e.ids=[26,888,660],e.modules={6266:(e,t,s)=>{e.exports={...s(Object(function(){var e=Error("Cannot find module '.prisma/client/default'");throw e.code="MODULE_NOT_FOUND",e}()))}},8985:(e,t,s)=>{"use strict";s.r(t),s.d(t,{config:()=>p,default:()=>x,getServerSideProps:()=>g,getStaticPaths:()=>v,getStaticProps:()=>f,reportWebVitals:()=>j,routeModule:()=>M,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>k,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>N,unstable_getStaticProps:()=>w});var r={};s.r(r),s.d(r,{default:()=>h});var a=s(3101),i=s(7873),n=s(8222),l=s(8486),d=s.n(l),o=s(6452),c=s(997),u=s(8539),m=s(2667);function h(){let{user:e}=(0,m.aF)(),t=e?.ruolo==="admin",s=e?.ruolo==="professionista";return c.jsx(u.Z,{children:(0,c.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,c.jsxs)("h1",{className:"text-2xl font-semibold text-gray-900",children:["Benvenuto, ",e?.nome," ",e?.cognome]}),c.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Ecco una panoramica della tua dashboard"}),(0,c.jsxs)("div",{className:"mt-8 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[!t&&!s&&(0,c.jsxs)(c.Fragment,{children:[c.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:c.jsx("div",{className:"p-5",children:(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),c.jsx("div",{className:"ml-5 w-0 flex-1",children:(0,c.jsxs)("dl",{children:[c.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Animali registrati"}),c.jsx("dd",{className:"text-lg font-medium text-gray-900",children:"0"})]})})]})})}),c.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:c.jsx("div",{className:"p-5",children:(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),c.jsx("div",{className:"ml-5 w-0 flex-1",children:(0,c.jsxs)("dl",{children:[c.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Appuntamenti"}),c.jsx("dd",{className:"text-lg font-medium text-gray-900",children:"0"})]})})]})})})]}),s&&(0,c.jsxs)(c.Fragment,{children:[c.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:c.jsx("div",{className:"p-5",children:(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),c.jsx("div",{className:"ml-5 w-0 flex-1",children:(0,c.jsxs)("dl",{children:[c.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Appuntamenti oggi"}),c.jsx("dd",{className:"text-lg font-medium text-gray-900",children:"0"})]})})]})})}),c.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:c.jsx("div",{className:"p-5",children:(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),c.jsx("div",{className:"ml-5 w-0 flex-1",children:(0,c.jsxs)("dl",{children:[c.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Appuntamenti completati"}),c.jsx("dd",{className:"text-lg font-medium text-gray-900",children:"0"})]})})]})})})]}),t&&(0,c.jsxs)(c.Fragment,{children:[c.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:c.jsx("div",{className:"p-5",children:(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),c.jsx("div",{className:"ml-5 w-0 flex-1",children:(0,c.jsxs)("dl",{children:[c.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Utenti totali"}),c.jsx("dd",{className:"text-lg font-medium text-gray-900",children:"0"})]})})]})})}),c.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:c.jsx("div",{className:"p-5",children:(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),c.jsx("div",{className:"ml-5 w-0 flex-1",children:(0,c.jsxs)("dl",{children:[c.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Professionisti da approvare"}),c.jsx("dd",{className:"text-lg font-medium text-gray-900",children:"0"})]})})]})})})]})]})]})})}let x=(0,n.l)(r,"default"),f=(0,n.l)(r,"getStaticProps"),v=(0,n.l)(r,"getStaticPaths"),g=(0,n.l)(r,"getServerSideProps"),p=(0,n.l)(r,"config"),j=(0,n.l)(r,"reportWebVitals"),w=(0,n.l)(r,"unstable_getStaticProps"),N=(0,n.l)(r,"unstable_getStaticPaths"),b=(0,n.l)(r,"unstable_getStaticParams"),y=(0,n.l)(r,"unstable_getServerProps"),k=(0,n.l)(r,"unstable_getServerSideProps"),M=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/dashboard",pathname:"/dashboard",bundlePath:"",filename:""},components:{App:o.default,Document:d()},userland:r})},8539:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var r=s(997),a=s(6689),i=s(5984),n=s.n(i),l=s(7193);function d({children:e}){let[t,s]=(0,a.useState)(!1),i=(0,l.useRouter)(),{user:d,loading:o}=function(){let[e,t]=(0,a.useState)(null),[s,r]=(0,a.useState)(!0);return(0,l.useRouter)(),{user:e,loading:s}}();if(o)return r.jsx("div",{children:"Caricamento..."});if(!d)return i.push("/login"),null;let c="admin"===d.ruolo,u=[{name:"Dashboard",href:"/dashboard",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},{name:"Profilo",href:"/dashboard/profile",icon:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},..."professionista"===d.ruolo?[{name:"Appuntamenti",href:"/dashboard/appointments",icon:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},{name:"Documenti",href:"/dashboard/documents",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}]:[],...c?[{name:"Utenti",href:"/dashboard/users",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},{name:"Professionisti",href:"/dashboard/professionals",icon:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"}]:[]];return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[r.jsx("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform ${t?"translate-x-0":"-translate-x-full"} transition-transform duration-200 ease-in-out lg:translate-x-0 lg:static lg:inset-0`,children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[r.jsx("div",{className:"flex items-center justify-center h-16 px-4 bg-indigo-600",children:r.jsx("span",{className:"text-white text-xl font-bold",children:"Eterna Dashboard"})}),r.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1",children:u.map(e=>(0,r.jsxs)(n(),{href:e.href,className:`flex items-center px-2 py-2 text-sm font-medium rounded-md ${i.pathname===e.href?"bg-indigo-100 text-indigo-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[r.jsx("svg",{className:"w-6 h-6 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:e.icon})}),e.name]},e.name))}),r.jsx("div",{className:"p-4 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:(0,r.jsxs)("div",{className:"w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-white",children:[d.nome?.[0],d.cognome?.[0]]})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:[d.nome," ",d.cognome]}),r.jsx("p",{className:"text-xs text-gray-500",children:d.ruolo})]})]})})]})}),(0,r.jsxs)("div",{className:"lg:pl-64 flex flex-col flex-1",children:[r.jsx("div",{className:"sticky top-0 z-10 flex items-center justify-between h-16 px-4 bg-white border-b border-gray-200 lg:hidden",children:(0,r.jsxs)("button",{type:"button",className:"text-gray-500 hover:text-gray-600",onClick:()=>s(!t),children:[r.jsx("span",{className:"sr-only",children:"Apri menu"}),r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]})}),r.jsx("main",{className:"flex-1 p-4",children:e})]})]})}},6452:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(997);function a({Component:e,pageProps:t}){return r.jsx(e,{...t})}s(2526)},2526:()=>{},3438:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.generateOtp=n;let a=s(4770),i=r(s(3162));async function n(e){let t=""+(0,a.randomInt)(1e5,999999),s=new Date(Date.now()+3e5);return await i.default.otps.create({data:{userId:e,code:t,expiresAt:s}}),t}},2667:(e,t,s)=>{"use strict";t.aF=void 0,s(3438),s(4634),s(3465);let r=s(3022);Object.defineProperty(t,"aF",{enumerable:!0,get:function(){return r.useUser}})},3465:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.login=n;let a=r(s(9344)),i=r(s(3162));async function n(e,t){let s=await i.default.users.findUnique({where:{email:e}});if(!s||s.pin!==t)return null;let r=a.default.sign({userId:s.id,role:s.role},process.env.JWT_SECRET,{expiresIn:"1h"});return await i.default.sessions.create({data:{userId:s.id,token:r,expiresAt:new Date(Date.now()+36e5)}}),r}},3022:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useUser=function(){let[e,t]=(0,r.useState)(null),[s,i]=(0,r.useState)(!0),n=(0,a.useRouter)();return(0,r.useEffect)(()=>{let e=localStorage.getItem("token");if(!e){i(!1);return}(async()=>{try{let s=await fetch("/api/auth/me",{headers:{Authorization:`Bearer ${e}`}});if(s.ok){let e=await s.json();t(e)}else localStorage.removeItem("token"),n.push("/login")}catch(e){console.error("Error fetching user:",e),localStorage.removeItem("token"),n.push("/login")}finally{i(!1)}})()},[n]),{user:e,loading:s}};let r=s(6689),a=s(7193)},4634:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.verifyOtp=i;let a=r(s(3162));async function i(e,t){let s=await a.default.otps.findFirst({where:{userId:e,code:t,used:!1}});return!(!s||new Date(s.expiresAt)<new Date)&&(await a.default.otps.update({where:{id:s.id},data:{used:!0}}),!0)}},3162:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=new(s(6266)).PrismaClient;t.default=r},9344:e=>{"use strict";e.exports=require("jsonwebtoken")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},4770:e=>{"use strict";e.exports=require("crypto")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[486,760,193],()=>s(8985));module.exports=r})();