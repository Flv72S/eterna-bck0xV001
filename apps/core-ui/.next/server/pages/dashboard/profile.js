(()=>{var e={};e.id=389,e.ids=[389,888,660],e.modules={4987:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{config:()=>x,default:()=>f,getServerSideProps:()=>h,getStaticPaths:()=>m,getStaticProps:()=>p,reportWebVitals:()=>g,routeModule:()=>S,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>_,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>y});var o=r(3101),s=r(7873),a=r(8222),i=r(8486),u=r.n(i),l=r(6452),d=r(9694),c=e([d]);d=(c.then?(await c)():c)[0];let f=(0,a.l)(d,"default"),p=(0,a.l)(d,"getStaticProps"),m=(0,a.l)(d,"getStaticPaths"),h=(0,a.l)(d,"getServerSideProps"),x=(0,a.l)(d,"config"),g=(0,a.l)(d,"reportWebVitals"),y=(0,a.l)(d,"unstable_getStaticProps"),v=(0,a.l)(d,"unstable_getStaticPaths"),b=(0,a.l)(d,"unstable_getStaticParams"),j=(0,a.l)(d,"unstable_getServerProps"),_=(0,a.l)(d,"unstable_getServerSideProps"),S=new o.PagesRouteModule({definition:{kind:s.x.PAGES,page:"/dashboard/profile",pathname:"/dashboard/profile",bundlePath:"",filename:""},components:{App:l.default,Document:u()},userland:d});n()}catch(e){n(e)}})},3995:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.d(t,{L:()=>f});var o=r(7449),s=r.n(o),a=r(7833),i=r(7612),u=r(2879),l=r(8432),d=r.n(l),c=e([a,i,u]);[a,i,u]=c.then?(await c)():c;let f={providers:[s()({name:"credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(e){if(!e?.email||!e?.password)throw Error("Email e password sono obbligatori");let t=await a.db.select().from(u.r).where((0,i.eq)(u.r.email,e.email)).limit(1);if(!t||!t[0])throw Error("Email non trovata");if(!await d().compare(e.password,t[0].password_hash))throw Error("Password non valida");return{id:t[0].id,email:t[0].email,name:t[0].nome,ruolo:t[0].ruolo,sezione_id:t[0].sezione_id}}})],session:{strategy:"jwt"},pages:{signIn:"/auth/signin",signOut:"/auth/signout",error:"/auth/error"},callbacks:{jwt:async({token:e,user:t})=>t?{...e,id:t.id,ruolo:t.ruolo,sezione_id:t.sezione_id}:e,session:async({session:e,token:t})=>({...e,user:{...e.user,id:t.id,ruolo:t.ruolo,sezione_id:t.sezione_id}})}};n()}catch(e){n(e)}})},3911:()=>{},8539:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(997),o=r(6689),s=r(5984),a=r.n(s),i=r(7193);function u({children:e}){let[t,r]=(0,o.useState)(!1),s=(0,i.useRouter)(),{user:u,loading:l}=function(){let[e,t]=(0,o.useState)(null),[r,n]=(0,o.useState)(!0);return(0,i.useRouter)(),{user:e,loading:r}}();if(l)return n.jsx("div",{children:"Caricamento..."});if(!u)return s.push("/login"),null;let d="admin"===u.ruolo,c=[{name:"Dashboard",href:"/dashboard",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},{name:"Profilo",href:"/dashboard/profile",icon:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},..."professionista"===u.ruolo?[{name:"Appuntamenti",href:"/dashboard/appointments",icon:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},{name:"Documenti",href:"/dashboard/documents",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}]:[],...d?[{name:"Utenti",href:"/dashboard/users",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},{name:"Professionisti",href:"/dashboard/professionals",icon:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"}]:[]];return(0,n.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[n.jsx("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform ${t?"translate-x-0":"-translate-x-full"} transition-transform duration-200 ease-in-out lg:translate-x-0 lg:static lg:inset-0`,children:(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[n.jsx("div",{className:"flex items-center justify-center h-16 px-4 bg-indigo-600",children:n.jsx("span",{className:"text-white text-xl font-bold",children:"Eterna Dashboard"})}),n.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1",children:c.map(e=>(0,n.jsxs)(a(),{href:e.href,className:`flex items-center px-2 py-2 text-sm font-medium rounded-md ${s.pathname===e.href?"bg-indigo-100 text-indigo-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[n.jsx("svg",{className:"w-6 h-6 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:e.icon})}),e.name]},e.name))}),n.jsx("div",{className:"p-4 border-t border-gray-200",children:(0,n.jsxs)("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:(0,n.jsxs)("div",{className:"w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-white",children:[u.nome?.[0],u.cognome?.[0]]})}),(0,n.jsxs)("div",{className:"ml-3",children:[(0,n.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:[u.nome," ",u.cognome]}),n.jsx("p",{className:"text-xs text-gray-500",children:u.ruolo})]})]})})]})}),(0,n.jsxs)("div",{className:"lg:pl-64 flex flex-col flex-1",children:[n.jsx("div",{className:"sticky top-0 z-10 flex items-center justify-between h-16 px-4 bg-white border-b border-gray-200 lg:hidden",children:(0,n.jsxs)("button",{type:"button",className:"text-gray-500 hover:text-gray-600",onClick:()=>r(!t),children:[n.jsx("span",{className:"sr-only",children:"Apri menu"}),n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]})}),n.jsx("main",{className:"flex-1 p-4",children:e})]})]})}},8820:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.d(t,{y:()=>a});var o=r(8358),s=e([o]);o=(s.then?(await s)():s)[0];let a=(0,o.pgTable)("eterna_sections",{id:(0,o.uuid)("id").primaryKey().defaultRandom(),nome:(0,o.text)("nome").notNull(),slug:(0,o.text)("slug").notNull().unique(),descrizione:(0,o.text)("descrizione"),created_at:(0,o.timestamp)("created_at").defaultNow(),updated_at:(0,o.timestamp)("updated_at").defaultNow()});n()}catch(e){n(e)}})},2879:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.d(t,{r:()=>i});var o=r(8358),s=r(8820),a=e([o,s]);[o,s]=a.then?(await a)():a;let i=(0,o.pgTable)("users",{id:(0,o.uuid)("id").primaryKey().defaultRandom(),email:(0,o.text)("email").notNull().unique(),nome:(0,o.text)("nome").notNull(),cognome:(0,o.text)("cognome").notNull(),password_hash:(0,o.text)("password_hash").notNull(),ruolo:(0,o.text)("ruolo").notNull().default("user"),sezione_id:(0,o.uuid)("sezione_id").references(()=>s.y.id),phone:(0,o.text)("phone"),created_at:(0,o.timestamp)("created_at").defaultNow(),updated_at:(0,o.timestamp)("updated_at").defaultNow()});n()}catch(e){n(e)}})},7833:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.d(t,{db:()=>l});var o=r(4922),s=r(5004),a=e([o,s]);[o,s]=a.then?(await a)():a;let i=process.env.DATABASE_URL,u=(0,s.default)(i),l=(0,o.drizzle)(u);n()}catch(e){n(e)}})},6452:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(997);function o({Component:e,pageProps:t}){return n.jsx(e,{...t})}r(2526)},9694:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{default:()=>f});var o=r(997),s=r(3227),a=r(3995),i=r(5096),u=r(3911),l=r.n(u),d=r(8539),c=e([a]);async function f(){return await (0,s.getServerSession)(a.L)||(0,i.redirect)("/auth/signin"),o.jsx(d.Z,{children:o.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,o.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,o.jsxs)("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Il Tuo Profilo"}),o.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Gestisci le tue informazioni personali"})]}),o.jsx(l(),{})]})})})}a=(c.then?(await c)():c)[0],n()}catch(e){n(e)}})},1655:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"bailoutToClientRendering",{enumerable:!0,get:function(){return s}});let n=r(1993),o=r(5869);function s(e){let t=o.staticGenerationAsyncStorage.getStore();if((null==t||!t.forceStatic)&&(null==t?void 0:t.isStaticGeneration))throw new n.BailoutToCSRError(e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2120:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return u.ReadonlyURLSearchParams},RedirectType:function(){return u.RedirectType},ServerInsertedHTMLContext:function(){return l.ServerInsertedHTMLContext},notFound:function(){return u.notFound},permanentRedirect:function(){return u.permanentRedirect},redirect:function(){return u.redirect},useParams:function(){return p},usePathname:function(){return c},useRouter:function(){return f},useSearchParams:function(){return d},useSelectedLayoutSegment:function(){return h},useSelectedLayoutSegments:function(){return m},useServerInsertedHTML:function(){return l.useServerInsertedHTML}});let n=r(6689),o=r(777),s=r(822),a=r(1271),i=r(4914),u=r(6225),l=r(1929);function d(){let e=(0,n.useContext)(s.SearchParamsContext),t=(0,n.useMemo)(()=>e?new u.ReadonlyURLSearchParams(e):null,[e]);{let{bailoutToClientRendering:e}=r(1655);e("useSearchParams()")}return t}function c(){return(0,n.useContext)(s.PathnameContext)}function f(){let e=(0,n.useContext)(o.AppRouterContext);if(null===e)throw Error("invariant expected app router to be mounted");return e}function p(){return(0,n.useContext)(s.PathParamsContext)}function m(e){void 0===e&&(e="children");let t=(0,n.useContext)(o.LayoutRouterContext);return t?function e(t,r,n,o){let s;if(void 0===n&&(n=!0),void 0===o&&(o=[]),n)s=t[1][r];else{var u;let e=t[1];s=null!=(u=e.children)?u:Object.values(e)[0]}if(!s)return o;let l=s[0],d=(0,a.getSegmentValue)(l);return!d||d.startsWith(i.PAGE_SEGMENT_KEY)?o:(o.push(d),e(s,r,!1,o))}(t.tree,e):null}function h(e){void 0===e&&(e="children");let t=m(e);if(!t||0===t.length)return null;let r="children"===e?t[0]:t[t.length-1];return r===i.DEFAULT_SEGMENT_KEY?null:r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6225:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return a},RedirectType:function(){return n.RedirectType},notFound:function(){return o.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect}});let n=r(1938),o=r(7920);class s extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class a extends URLSearchParams{append(){throw new s}delete(){throw new s}set(){throw new s}sort(){throw new s}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7920:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNotFoundError:function(){return o},notFound:function(){return n}});let r="NEXT_NOT_FOUND";function n(){let e=Error(r);throw e.digest=r,e}function o(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2262:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1938:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return n},getRedirectError:function(){return u},getRedirectStatusCodeFromError:function(){return m},getRedirectTypeFromError:function(){return p},getURLFromRedirectError:function(){return f},isRedirectError:function(){return c},permanentRedirect:function(){return d},redirect:function(){return l}});let o=r(4580),s=r(2934),a=r(2262),i="NEXT_REDIRECT";function u(e,t,r){void 0===r&&(r=a.RedirectStatusCode.TemporaryRedirect);let n=Error(i);n.digest=i+";"+t+";"+e+";"+r+";";let s=o.requestAsyncStorage.getStore();return s&&(n.mutableCookies=s.mutableCookies),n}function l(e,t){void 0===t&&(t="replace");let r=s.actionAsyncStorage.getStore();throw u(e,t,(null==r?void 0:r.isAction)?a.RedirectStatusCode.SeeOther:a.RedirectStatusCode.TemporaryRedirect)}function d(e,t){void 0===t&&(t="replace");let r=s.actionAsyncStorage.getStore();throw u(e,t,(null==r?void 0:r.isAction)?a.RedirectStatusCode.SeeOther:a.RedirectStatusCode.PermanentRedirect)}function c(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r,n,o]=e.digest.split(";",4),s=Number(o);return t===i&&("replace"===r||"push"===r)&&"string"==typeof n&&!isNaN(s)&&s in a.RedirectStatusCode}function f(e){return c(e)?e.digest.split(";",3)[2]:null}function p(e){if(!c(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function m(e){if(!c(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(n||(n={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1271:(e,t)=>{"use strict";function r(e){return Array.isArray(e)?e[1]:e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getSegmentValue",{enumerable:!0,get:function(){return r}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1993:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{BailoutToCSRError:function(){return n},isBailoutToCSRError:function(){return o}});let r="BAILOUT_TO_CLIENT_SIDE_RENDERING";class n extends Error{constructor(e){super("Bail out to client-side rendering: "+e),this.reason=e,this.digest=r}}function o(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}},2526:()=>{},822:(e,t,r)=>{"use strict";e.exports=r(3101).vendored.contexts.HooksClientContext},1929:(e,t,r)=>{"use strict";e.exports=r(3101).vendored.contexts.ServerInsertedHtml},5096:(e,t,r)=>{e.exports=r(2120)},8432:e=>{"use strict";e.exports=require("bcryptjs")},3227:e=>{"use strict";e.exports=require("next-auth")},7449:e=>{"use strict";e.exports=require("next-auth/providers/credentials")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")},7612:e=>{"use strict";e.exports=import("drizzle-orm")},8358:e=>{"use strict";e.exports=import("drizzle-orm/pg-core")},4922:e=>{"use strict";e.exports=import("drizzle-orm/postgres-js")},5004:e=>{"use strict";e.exports=import("postgres")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[486,760,193],()=>r(4987));module.exports=n})();